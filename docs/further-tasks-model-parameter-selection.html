<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Further Tasks: Model Parameter Selection | Data Analysis: Confidence Intervals and Model Parameter Selection</title>
  <meta name="description" content="Further Tasks: Model Parameter Selection | Data Analysis: Confidence Intervals and Model Parameter Selection" />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Further Tasks: Model Parameter Selection | Data Analysis: Confidence Intervals and Model Parameter Selection" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Further Tasks: Model Parameter Selection | Data Analysis: Confidence Intervals and Model Parameter Selection" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="a-final-word-on-model-selection.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="include/webex.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="confidence-intervals-for-regression-parameters.html"><a href="confidence-intervals-for-regression-parameters.html"><i class="fa fa-check"></i>Confidence Intervals for Regression Parameters</a></li>
<li class="chapter" data-level="" data-path="inference-using-confidence-intervals.html"><a href="inference-using-confidence-intervals.html"><i class="fa fa-check"></i>Inference using Confidence Intervals</a>
<ul>
<li class="chapter" data-level="" data-path="inference-using-confidence-intervals.html"><a href="inference-using-confidence-intervals.html#simple-linear-regression-ey_i-alpha-beta-x_i"><i class="fa fa-check"></i>Simple Linear Regression: <span class="math inline">\(E(y_i) = \alpha + \beta x_i\)</span></a></li>
<li class="chapter" data-level="" data-path="inference-using-confidence-intervals.html"><a href="inference-using-confidence-intervals.html#multiple-regression-ey_i-beta_0-beta_1-x_1i-beta_2-x_2i-..."><i class="fa fa-check"></i>Multiple Regression <span class="math inline">\(E(y_i) = \beta_0 + \beta_1 x_{1i} + \beta_2 x_{2i} + ...\)</span></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="variable-selection-using-confidence-intervals.html"><a href="variable-selection-using-confidence-intervals.html"><i class="fa fa-check"></i>Variable selection using confidence intervals</a></li>
<li class="chapter" data-level="" data-path="model-comparisons-using-objective-criteria.html"><a href="model-comparisons-using-objective-criteria.html"><i class="fa fa-check"></i>Model comparisons using objective criteria</a></li>
<li class="chapter" data-level="" data-path="a-final-word-on-model-selection.html"><a href="a-final-word-on-model-selection.html"><i class="fa fa-check"></i>A final word on model selection</a></li>
<li class="chapter" data-level="" data-path="further-tasks-model-parameter-selection.html"><a href="further-tasks-model-parameter-selection.html"><i class="fa fa-check"></i>Further Tasks: Model Parameter Selection</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis: Confidence Intervals and Model Parameter Selection</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="further-tasks-model-parameter-selection" class="section level1 unnumbered hasAnchor">
<h1>Further Tasks: Model Parameter Selection<a href="further-tasks-model-parameter-selection.html#further-tasks-model-parameter-selection" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Complete the following tasks by using RMarkdown to produce a single document which summarises all your work, i.e. the original questions, your R code, your comments and reflections, etc.</p>
<p><br></p>
<p><strong>Task</strong> Data was collected on the characteristics of homes in the American city of Los Angeles (LA) in 2010 and can be found in the file <code>LAhomes.csv</code> on the Moodle page. The data contain the following variables:</p>
<ul>
<li><code>city</code> - the district of LA where the house was located</li>
<li><code>type</code> - either <code>SFR</code> (Single Family Residences) or <code>Condo/Twh</code> (Condominium/Town House)</li>
<li><code>bed</code> - the number of bedrooms</li>
<li><code>bath</code> - the number of bathrooms</li>
<li><code>garage</code> - the number of car spaces in the garage</li>
<li><code>sqft</code> - the floor area of the house (in square feet)</li>
<li><code>pool</code> - <code>Y</code> if the house has a pool</li>
<li><code>spa</code> - <code>TRUE</code> if the house has a spa</li>
<li><code>price</code> - the most recent sales price ($US)</li>
</ul>
<p>We are interested in exploring the relationships betwen <code>price</code> and the other variables.</p>
<p>Read the data into an object called <code>LAhomes</code> and answer the following questions.</p>
<ol style="list-style-type: lower-alpha">
<li>By looking at the univariate and bivariate distributions on the <code>price</code> and <code>sqft</code> variables below, what would be a sensible way to proceed if we wanted to model this data? What care must be taken if you were to proceed this way?</li>
</ol>
<p><img src="main_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>Fit the simple linear model with <code>log(price)</code> as the response and <code>log(sqft)</code> as the predictor. Display the fitted model on a scatterplot of the data and construct a bootstrap confidence interval (using the percentiles of the bootstrap distribution) for the slope parameter in the model and interpret its point and interval estimates.</li>
</ol>
<div class="webex-solution">
<button>
Hint
</button>
<p>Although you can supply the <code>lm()</code> function with terms like <code>log(price)</code> when you use the <code>infer</code> package to generate bootstrap intervals you the transformed variable needs to already exist. Use the <code>mutate()</code> function in the <code>dplyr</code> package to create new transformed variables.</p>
</div>
<ol start="3" style="list-style-type: lower-alpha">
<li><p>Repeat the analysis in part b. but with the log of the number of bathrooms (<code>bath</code>) as the single explanatory variable.</p></li>
<li><p>Fit the multiple linear regression model using the <strong>log transform of all the variables</strong> <code>price</code> (as the response) and both <code>sqft</code> and <code>bath</code> (as the explanatory variables). Calculate the point and interval estimates of the coefficients of the two predictors separately. Compare their point and interval estimates to those you calculated in parts b. and c. Can you account for the differences?</p></li>
</ol>
<div class="webex-solution">
<button>
Hint
</button>
<p>Remember that we didn't use bootstrapping to construct the confidence intervals for parameters in multiple linear regression models, but rather used the theoretical results based on assumptions. You can access these estimates using the <code>get_regression_table()</code> function in the <code>moderndive</code> package.</p>
</div>
<ol start="5" style="list-style-type: lower-alpha">
<li>Using the objective measures for model comparisons, which of the models in parts b., c. and d. would you favour? Is this consistent with your conclusions in part d.?</li>
</ol>
<p><br></p>
<p><strong>Task</strong> You have been asked to determine the pricing of a New York City (NYC) Italian restaurant's dinner menu such that it is competitively positioned with other high-end Italian restaurants by analyzing pricing data that have been collected in order to produce a regression model to predict the price of dinner.</p>
<p>Data from surveys of customers of 168 Italian restaurants in the target area are available. The data can be found in the file <code>restNYC.csv</code> on the Moodle page. Each row represents one customer survey from Italian restaurants in NYC and includes the key variables:</p>
<ul>
<li><code>Price</code> - price (in $US) of dinner (including a tip and one drink)</li>
<li><code>Food</code> - customer rating of the food (from 1 to 30)</li>
<li><code>Decor</code> - customer rating fo the decor (from 1 to 30)</li>
<li><code>Service</code> - customer rating of the service (from 1 to 30)</li>
<li><code>East</code> - dummy variable with the value 1 if the restaurant is east of Fifth Avenue, 0 otherwise</li>
</ul>
<ol style="list-style-type: lower-alpha">
<li>Use the <code>ggpairs</code> function in the <code>GGally</code> package (see the following code) to generate an informative set of graphical and numerical summaries which illuminate the relationships between pairs of variables. Where do you see the strongest evidence of relationships between <code>price</code> and the potential explanatory variables? Is there evidence of multicollineatity in the data?</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="further-tasks-model-parameter-selection.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally) <span class="co">#Package to produce matrix of &#39;pairs&#39; plots and more!</span></span>
<span id="cb12-2"><a href="further-tasks-model-parameter-selection.html#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="further-tasks-model-parameter-selection.html#cb12-3" aria-hidden="true" tabindex="-1"></a>restNYC<span class="sc">$</span>East <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(restNYC<span class="sc">$</span>East) <span class="co"># East needs to be a factor</span></span>
<span id="cb12-4"><a href="further-tasks-model-parameter-selection.html#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="further-tasks-model-parameter-selection.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Including the `East` factor</span></span>
<span id="cb12-6"><a href="further-tasks-model-parameter-selection.html#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(restNYC[,<span class="dv">4</span><span class="sc">:</span><span class="dv">8</span>], <span class="fu">aes</span>(<span class="at">colour =</span> East, <span class="at">alpha =</span> <span class="fl">0.4</span>)) </span>
<span id="cb12-7"><a href="further-tasks-model-parameter-selection.html#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="further-tasks-model-parameter-selection.html#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Without the `East` factor</span></span>
<span id="cb12-9"><a href="further-tasks-model-parameter-selection.html#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(restNYC[,<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>], <span class="fu">aes</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>)) </span></code></pre></div>
<ol start="2" style="list-style-type: lower-alpha">
<li><p>Fit the simple linear model with <code>Price</code> as the response and <code>Service</code> as the predictor and display the fitted model on a scatterplot of the data. Construct a bootstrap confidence interval (using the standard error from the bootstrap distribution) for the slope parameter in the model.</p>
<p>Now fit a multiple regressing model of <code>Price</code> on <code>Service</code>, <code>Food</code>, and <code>Decor</code>. What happens to the significance of <code>Service</code> when additional variables were added to the model?</p></li>
<li><p>What is the correct interpretation of the coefficient on <code>Service</code> in the linear model which regresses <code>Price</code> on <code>Service</code>, <code>Food</code>, and <code>Decor</code>?</p></li>
</ol>
<p><br>
<br></p>

</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="a-final-word-on-model-selection.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["main.pdf", "main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
